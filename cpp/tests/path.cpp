// TODO test that gen_paths are valid